/*! For license information please see 11c7a0efa74f6d488cf4ce0ffbe4d05a.92f4198e7c280f4f9e80.js.LICENSE.txt */
(self.webpackChunkvk=self.webpackChunkvk||[]).push([[79542],{10409:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8Z" /></symbol>',12,16,!1,void 0)},85561:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon20DeleteOutline","delete_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" d="M6.837 4H2.75a.75.75 0 0 0 0 1.5h.545l.907 9.248c.051.523.094.96.157 1.314.066.37.163.711.353 1.028a2.9 2.9 0 0 0 1.247 1.131c.334.158.682.222 1.058.25.36.029.797.029 1.323.029h3.32c.526 0 .964 0 1.323-.028.376-.03.724-.093 1.058-.25a2.9 2.9 0 0 0 1.247-1.132c.19-.317.287-.657.353-1.028.063-.355.106-.79.157-1.314l.907-9.248h.545a.75.75 0 0 0 0-1.5h-4.087a3.25 3.25 0 0 0-6.326 0Zm1.581 0h3.164a1.751 1.751 0 0 0-3.164 0Zm6.78 1.5H4.802l.89 9.072c.054.56.091.938.143 1.228.05.281.104.422.162.52a1.4 1.4 0 0 0 .603.546c.102.048.248.088.533.11.294.024.673.024 1.235.024h3.262c.562 0 .941 0 1.235-.023.285-.023.43-.063.533-.111a1.4 1.4 0 0 0 .603-.547c.058-.097.112-.238.162-.52.052-.29.09-.667.144-1.226l.89-9.073Zm-2.886 2.002a.75.75 0 0 1 .685.81l-.5 6.003a.75.75 0 0 1-1.494-.124l.5-6.003a.75.75 0 0 1 .81-.686Zm-4.624 0a.75.75 0 0 1 .81.686l.5 6.002a.75.75 0 0 1-1.495.125l-.5-6.003a.75.75 0 0 1 .685-.81Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},94941:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon20MessagesOutline","messages_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="messages_outline_20"><path fill-rule="evenodd" d="M8 2C4.44 2 1.5 4.518 1.5 7.754c0 1.084.336 2.12.954 3.014-.094.407-.361 1.038-.82 1.877a1.08 1.08 0 0 0 .46 1.483c.167.086.352.127.538.121 1.426-.041 2.563-.365 3.366-1.015.64.18 1.313.274 2.002.274 3.56 0 6.5-2.518 6.5-5.754C14.5 4.518 11.56 2 8 2Zm0 1.5c-2.917 0-5 2.02-5 4.254 0 .788.25 1.55.726 2.216l.134.188a.75.75 0 0 1 .128.572l-.042.226c-.09.49-.324 1.087-.648 1.742.873-.107 1.438-.357 1.795-.662l.24-.206a.75.75 0 0 1 .701-.15l.308.092c.523.155 1.08.236 1.658.236 2.917 0 5-2.02 5-4.254C13 5.52 10.917 3.5 8 3.5Zm8.157 5.075a.75.75 0 1 1 1.187-.916 5.455 5.455 0 0 1 1.156 3.345 5.42 5.42 0 0 1-.914 3.008c.088.411.346 1.049.789 1.895a1.089 1.089 0 0 1-.992 1.593c-1.363-.042-2.456-.363-3.231-1.01a6.808 6.808 0 0 1-1.902.268 6.733 6.733 0 0 1-2.57-.5.75.75 0 0 1 .572-1.388 5.22 5.22 0 0 0 1.998.388c.546 0 1.073-.08 1.568-.233l.294-.092a.75.75 0 0 1 .722.158l.23.206c.33.294.85.538 1.652.646-.311-.657-.535-1.253-.622-1.743l-.04-.225a.75.75 0 0 1 .12-.554l.129-.188a3.925 3.925 0 0 0 .697-2.23c0-.894-.306-1.733-.843-2.429Z" /></symbol>',20,20,!1,void 0)},53273:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon24ChevronCompactLeft","chevron_compact_left_24","0 0 16 24",'<symbol fill="none" viewBox="0 0 16 24" xmlns="http://www.w3.org/2000/svg" id="chevron_compact_left_24"><path d="M11.293 7.706a1 1 0 0 0 0-1.412l-.088-.088a.997.997 0 0 0-1.414.002l-5.084 5.084a.998.998 0 0 0 0 1.416l5.084 5.084c.39.391 1.026.39 1.414.002l.088-.088a.995.995 0 0 0 0-1.412L7 12z" fill="currentColor" /></symbol>',16,24,!1,void 0)},27346:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon24ChevronCompactRight","chevron_compact_right_24","0 0 16 24",'<symbol fill="none" viewBox="0 0 16 24" xmlns="http://www.w3.org/2000/svg" id="chevron_compact_right_24"><path d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a.998.998 0 0 1 0 1.416l-5.084 5.084a1.002 1.002 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" fill="currentColor" /></symbol>',16,24,!1,void 0)},74877:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon24DocumentOutline","document_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="document_outline_24"><path fill-rule="evenodd" d="M12.473 2c.3 0 .586 0 .866.066a2.4 2.4 0 0 1 .694.288c.245.15.447.353.659.565l4.389 4.39c.212.21.415.413.565.658a2.4 2.4 0 0 1 .288.694c.067.28.066.566.066.866v6.012c0 .947 0 1.713-.05 2.333-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.076c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.922-1.922c-.267-.523-.377-1.087-.43-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.402 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.462 2h2.011ZM10.5 3.8H12v2.135c0 .53 0 .981.03 1.352.032.39.102.768.286 1.13a2.9 2.9 0 0 0 1.267 1.267c.362.184.741.254 1.13.286.37.03.822.03 1.352.03H18.2v5.5c0 .995 0 1.687-.045 2.226-.043.527-.123.828-.238 1.054a2.6 2.6 0 0 1-1.137 1.137c-.226.115-.527.195-1.055.238-.538.044-1.23.045-2.225.045h-3c-.995 0-1.687 0-2.226-.045-.527-.043-.828-.123-1.054-.238a2.6 2.6 0 0 1-1.137-1.137c-.115-.226-.195-.527-.238-1.055-.044-.538-.045-1.23-.045-2.225v-7c0-.995 0-1.687.045-2.225.043-.528.123-.829.238-1.055A2.6 2.6 0 0 1 7.22 4.083c.226-.115.527-.195 1.054-.238C8.813 3.8 9.505 3.8 10.5 3.8Zm3.3.773L17.427 8.2H16.1c-.575 0-.952 0-1.24-.024-.278-.023-.393-.062-.46-.096a1.1 1.1 0 0 1-.48-.48c-.034-.066-.073-.182-.096-.46A17.426 17.426 0 0 1 13.8 5.9V4.573Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},50485:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2Zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Z" fill="currentColor" /></g></symbol>',24,24,!1,void 0)},54629:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(93708).makeIcon)("Icon32Play","play_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="play_32"><path d="M24.948 14.001c1.154.656 1.732.984 1.925 1.412.17.374.17.8 0 1.174-.194.428-.77.756-1.925 1.412l-12.43 7.061c-1.154.656-1.732.984-2.205.935a1.471 1.471 0 0 1-1.033-.587C9 25.03 9 24.373 9 23.061V8.938c0-1.311 0-1.967.28-2.347.244-.33.62-.543 1.033-.586.473-.05 1.05.279 2.205.935L24.948 14Z" /></symbol>',32,32,!1,void 0)},93708:(e,t,n)=>{"use strict";n.d(t,{makeIcon:()=>E});var r=n(67294),o=n(87854),a=n.n(o);var i,c=r.createContext({}),l=n(62548),s=n.n(l),u=!("undefined"==typeof window||!window.document||!window.document.createElement);if(u){var d="__SVG_SPRITE_NODE__";i=new(s())({attrs:{id:d}});var f=function(){var e=document.getElementById(d);e?i.attach(e):i.mount(),document.removeEventListener("DOMContentLoaded",f)};document.querySelector("body")?f():document.addEventListener("DOMContentLoaded",f)}else i=null;var v=u?r.useLayoutEffect:r.useEffect;function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y={display:"block"};var w=function(e){var t=e.width,n=e.height,o=e.viewBox,a=e.id,i=e.className,l=void 0===i?"":i,s=e.style,u=void 0===s?{}:s,d=e.fill,f=e.getRootRef,v=e.Component,p=void 0===v?"div":v,w=e.role,E=e["aria-label"],_=e["aria-hidden"],C=b(e,["width","height","viewBox","id","className","style","fill","getRootRef","Component","role","aria-label","aria-hidden"]),k=Math.max(t,n),O=r.useContext(c),A=function(e,t){for(var n=t.classPrefix,r=t.globalClasses,o="",a=0;a<e.length;a++)n&&(o+=" "+(n+e[a])),n&&!r||(o+=" "+e[a]);return o}(["Icon","Icon--".concat(k),"Icon--w-".concat(t),"Icon--h-".concat(n),"Icon--".concat(a)],O);return r.createElement(p,h({role:"presentation"},C,{ref:f,className:"".concat(A," ").concat(l),style:g(m({},u),{width:t,height:n})}),r.createElement("svg",{viewBox:o,width:t,height:n,style:y,role:w,"aria-label":E,"aria-hidden":_},r.createElement("use",{xlinkHref:"#".concat(a),style:{fill:"currentColor",color:d}})))};function E(e,t,n,o,c,l,s,u){var d=!1;function f(){var e;d||(e=new(a())({id:t,viewBox:n,content:o}),i&&i.add(e),d=!0)}var p=s?function(e){var t={};return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";t[n]||(console[r]("[@vkontakte/icons][".concat(e,"] ").concat(n)),t[n]=!0)}}(e):null,m=function(e){if(v(f,[]),s){var o=u?". Замените на ".concat(u):"";p("Иконка устарела"+o)}return r.createElement(w,h({},e,{viewBox:n,id:t,width:isNaN(e.width)?c:+e.width,height:isNaN(e.height)?l:+e.height}))};return m.mountIcon=f,m.displayName=e,m}},11798:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(63192).makeIcon)("Icon12Cancel","cancel_12","0 0 12 12",'<symbol fill="none" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" id="cancel_12"><path d="M3.525 2.464a.75.75 0 0 0-1.06 1.061L4.938 6 2.464 8.475a.75.75 0 1 0 1.061 1.06L6 7.062l2.475 2.475a.75.75 0 0 0 1.06-1.061L7.062 6l2.475-2.475a.75.75 0 1 0-1.061-1.06L6 4.938z" fill="currentColor" /></symbol>',12,12,!1,void 0)},45898:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(63192).makeIcon)("Icon24Add","add_24","0 0 24 24",'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="add_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M13 11h6.5a1 1 0 0 1 0 2H13v6.5a1 1 0 0 1-2 0V13H4.5a1 1 0 0 1 0-2H11V4.5a1 1 0 0 1 2 0V11Z" fill="currentColor" /></g></symbol>',24,24,!1,void 0)},58255:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(11132);function o(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},11132:(e,t,n)=>{"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>r})},74277:(e,t,n)=>{"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function o(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>o})},29697:(e,t,n)=>{"use strict";n.d(t,{default:()=>v});var r=n(54337),o=n(73949),a=n(86186),i=n(58255),c=n(74277),l=n(67294),s=n(96630),u=n(59391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,c.default)(e,t)}))},f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1];t.removeClasses(o,"exit"),t.addClass(o,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1]?"appear":"enter";t.addClass(o,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1]?"appear":"enter";t.removeClasses(o,a),t.addClass(o,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}(0,a.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&(0,u.forceReflow)(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,a=n.done;this.appliedClasses[t]={},r&&d(e,r),o&&d(e,o),a&&d(e,a)},n.render=function(){var e=this.props,t=(e.classNames,(0,o.default)(e,["classNames"]));return l.createElement(s.default,(0,r.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);f.defaultProps={classNames:""},f.propTypes={};const v=f},96630:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var r=n(73949),o=n(86186),a=n(67294),i=n(73935),c=n(6035),l=n(220),s=n(59391),u="unmounted",d="exited",f="entering",v="entered",p="exiting",h=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(o=d,r.appearStatus=f):o=v:o=t.unmountOnExit||t.mountOnEnter?u:d,r.state={status:o},r.nextCallback=null,r}(0,o.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==v&&(t=f):n!==f&&n!==v||(t=p)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===f){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this);n&&(0,s.forceReflow)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[i.findDOMNode(this),r],a=o[0],l=o[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||c.default.disabled?this.safeSetState({status:v},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,l),this.safeSetState({status:f},(function(){t.props.onEntering(a,l),t.onTransitionEnd(u,(function(){t.safeSetState({status:v},(function(){t.props.onEntered(a,l)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:i.findDOMNode(this);t&&!c.default.disabled?(this.props.onExit(r),this.safeSetState({status:p},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],c=o[1];this.props.addEndListener(a,c)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,o=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(l.default.Provider,{value:null},"function"==typeof n?n(e,o):a.cloneElement(a.Children.only(n),o))},t}(a.Component);function m(){}h.contextType=l.default,h.propTypes={},h.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},h.UNMOUNTED=u,h.EXITED=d,h.ENTERING=f,h.ENTERED=v,h.EXITING=p;const g=h},220:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=n(67294).createContext(null)},6035:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={disabled:!1}},59391:(e,t,n)=>{"use strict";n.d(t,{forceReflow:()=>r});var r=function(e){return e.scrollTop}},54337:(e,t,n)=>{"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{default:()=>r})},86186:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(66244);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.default)(e,t)}},73949:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{default:()=>r})},66244:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{default:()=>r})},19423:(e,t,n)=>{"use strict";n.d(t,{ConvoAudiosPlaylist:()=>f,ConvoAudiosPlaylistRestored:()=>v});var r=n(80312),o=n(22559),a=n(25155),i=n(50706),c=n(9727);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(t){(0,a.default)(this,e),this.convo=t}return(0,i.default)(e,[{key:"getNext",value:function(e){var t=this.getConvoAudiosList(),n=t.findIndex((function(t){return t.id===e.id})),r=t[n+1];if(r)return d(d({},r),{},{progress:0})}},{key:"getConvoAudiosList",value:function(){var e,t=[],n=l(c.iterable(this.convo));try{for(n.s();!(e=n.n()).done;){var o,a=e.value.message;if("Service"!==a.kind&&"Expired"!==a.kind){var i=[];if(Array.isArray(a.attaches.audios)){var s=(0,r.default)(a.attaches.audios);i.push.apply(i,(0,r.default)(s.reverse()))}var u=null===(o=a.attaches.wall)||void 0===o?void 0:o.attaches.audios;if(Array.isArray(u)){var f=(0,r.default)(u);i.push.apply(i,(0,r.default)(f.reverse()))}i.forEach((function(e){e.url&&t.push(d(d({},e),{},{id:"".concat(e.ownerId,"_").concat(e.id)}))}))}}}catch(e){n.e(e)}finally{n.f()}return t.reverse()}},{key:"getPlaylistMeta",value:function(){return{type:"temp",convoPeerId:this.convo.peerId}}}]),e}(),v=function(){function e(t){(0,a.default)(this,e),this.list=t.list,this.meta=t.meta}return(0,i.default)(e,[{key:"getNext",value:function(e){var t=this.list.findIndex((function(t){return t.id===e.id})),n=this.list[t+1];if(n)return d(d({},n),{},{progress:0})}},{key:"getConvoAudiosList",value:function(){return this.list}},{key:"getPlaylistMeta",value:function(){return this.meta}}]),e}()},77673:(e,t,n)=>{"use strict";n.d(t,{useComposerDraft:()=>a,ComposerDraftsContext:()=>i});var r=n(67294),o=n(89018);function a(e){var t,n=(0,r.useContext)(i);if(!n)throw new Error("SaveMessageDraftProvider не добавлен в дерево Реакта!");return null!==(t=n[e])&&void 0!==t?t:o.DEFAULT_DRAFT}var i=r.createContext({})},48521:(e,t,n)=>{"use strict";n.d(t,{useModuleKeyBoardHandlers:()=>s,useGlobalKeyBoardHandlers:()=>u,KeyBoardHandlersProvider:()=>d});var r=n(80312),o=n(56568),a=n(8994),i=n(67294),c=n(12869),l=(0,i.createContext)(null),s=function(e){var t=e.moduleName,n=e.activateOnFirstRender,r=void 0===n||n,o=e.activateOnFocusInRef,c=e.blockGlobalHandlersWhileActive,s=void 0!==c&&c,u=(0,i.useContext)(l);if(!u)throw new Error("KeyBoardHandlersContext не добавлен в дерево Реакта!");var d=(0,i.useRef)("".concat(t,"_").concat((0,a.nanoid)(7))),f=u.activeModule,v=u.activateModule,p=u.removeModuleFromActiveStack,h=u.subscribeModuleKeyDown,m=u.isGlobalHandlersBlocked,g=u.blockGlobalHandlers,b=u.unblockGlobalHandlers,y=(0,i.useCallback)((function(){v(d.current),s&&g()}),[v,g,s,d]),w=(0,i.useCallback)((function(){p(d.current),f===d.current&&s&&b()}),[f,p,b,s]),E=(0,i.useCallback)((function(e){return h(d.current,e)}),[h]);return(0,i.useLayoutEffect)((function(){return r&&y(),function(){w()}}),[]),(0,i.useLayoutEffect)((function(){var e,t=null==o?void 0:o.current;if(t)return t.tabIndex=null!==(e=t.tabIndex)&&void 0!==e?e:-1,t.addEventListener("focusin",y,!0),t.addEventListener("focusout",w,!0),function(){t.removeEventListener("focusin",y,!0),t.removeEventListener("focusout",w,!0)}}),[o,y,w]),(0,i.useEffect)((function(){if(d.current===f)return!m&&s&&g(),m&&!s&&b(),function(){s&&b()}}),[d,f,m,s,g,b]),{activateModule:y,removeModuleFromActiveStack:w,subscribeKeyDown:E,blockGlobalHandlers:g,unblockGlobalHandlers:b}},u=function(){var e=(0,i.useContext)(l);if(!e)throw new Error("KeyBoardHandlersContext не добавлен в дерево Реакта!");return{blockGlobalHandlers:e.blockGlobalHandlers,unblockGlobalHandlers:e.unblockGlobalHandlers,subscribeGlobalKeyDown:e.subscribeGlobalKeyDown}},d=function(e){var t=e.children,n=(0,i.useState)([]),s=(0,o.default)(n,2),u=s[0],d=s[1],p=(0,i.useState)(),h=(0,o.default)(p,2),m=h[0],g=h[1],b=(0,i.useRef)((0,a.nanoid)(7)),y=(0,i.useRef)(new Map);(0,i.useEffect)((function(){g((function(){return u[u.length-1]})),f(b.current)}),[u]);var w=(0,i.useCallback)((function(e,t){if(y.current.has(e))throw new Error("Module ".concat(e," is already subscribed. Unsubscribe it first."));return y.current.set(e,t),function(){y.current.delete(e)}}),[]),E=(0,i.useCallback)((function(e,t){var n=(0,r.default)(e),o=n.indexOf(t);return-1!==o&&n.splice(o,1),n}),[]),_=(0,i.useCallback)((function(e){d((function(t){return E(t,e)}))}),[E]),C=(0,i.useCallback)((function(e){d((function(t){var n=E(t,e);return[].concat((0,r.default)(n),[e])}))}),[E]),k=(0,i.useRef)(new Map),O=(0,i.useRef)(!1),A=(0,i.useCallback)((function(e,t){if(k.current.has(e))throw new Error("Global keyCombo ".concat(e," is already subscribed. Unsubscribe it first"));return k.current.set(e,t),function(){k.current.delete(e)}}),[]),x=(0,i.useCallback)((function(){O.current=!0}),[]),P=(0,i.useCallback)((function(){O.current=!1}),[]),N=(0,i.useCallback)((function(e,t){if(void 0!==m&&v(b.current)){var n=y.current.get(m);n&&n(e,t)}}),[m]),M=(0,i.useCallback)((function(e,t){if(O.current)t();else{var n=k.current.get(e);n&&(!1!==n.autoPreventDefault?(t(),n.handler()):n.handler(t))}}),[]),L=(0,i.useCallback)((function(e){var t=(0,c.getKeyCombo)(e),n=e.preventDefault.bind(e);(0,c.isGlobalKeyCombo)(t)?M(t,n):(0,c.isModuleKeyCombo)(t)&&N(t,n)}),[N,M]);(0,i.useEffect)((function(){return document.addEventListener("keydown",L),function(){document.removeEventListener("keydown",L)}}),[L]);var S=(0,i.useMemo)((function(){return{activeModule:m,subscribeGlobalKeyDown:A,subscribeModuleKeyDown:w,activateModule:C,removeModuleFromActiveStack:_,isGlobalHandlersBlocked:O.current,blockGlobalHandlers:x,unblockGlobalHandlers:P}}),[m,A,w,C,_,x,P]);return i.createElement(l.Provider,{value:S},t)},f=function(e){window.sessionStorage.setItem("active_key_board_handling_context",e)},v=function(e){var t=window.sessionStorage.getItem("active_key_board_handling_context");return null===t||e===t}},66600:(e,t,n)=>{"use strict";n.d(t,{ActionsMenu:()=>h,ActionsMenuAction:()=>m,ActionsMenuDropdownAction:()=>g,ActionsMenuSeparator:()=>b});var r=n(56568),o=n(14957),a=n(16790),i=n(67294),c=n(20700),l=n.n(c),s=n(10409),u=n(84839),d=n(36698),f=["className","children"],v=["leftIcon","rightIcon","title","type","className","children","onClick"],p=["children","icon","openType","hideOnClick"],h=function(e){var t=e.className,n=e.children,r=(0,a.default)(e,f);return i.createElement("div",(0,o.default)({},r,{className:l()("ActionsMenu",t)}),n)},m=function(e){var t=e.leftIcon,n=e.rightIcon,r=e.title,c=e.type,s=void 0===c?"primary":c,u=e.className,d=(e.children,e.onClick),f=(0,a.default)(e,v);return i.createElement("button",(0,o.default)({},f,{className:l()("ActionsMenuAction",s&&"ActionsMenuAction--".concat(s),u),onClick:d}),t&&i.createElement("i",{className:"ActionsMenuAction__icon"},t),i.createElement("span",{className:"ActionsMenuAction__title"},r),n&&i.createElement("i",{className:"ActionsMenuAction__icon"},n))},g=function(e){var t=e.children,n=e.icon,c=e.openType,f=e.hideOnClick,v=void 0===f||f,g=(0,a.default)(e,p),b=(0,i.useState)(!1),y=(0,r.default)(b,2),w=y[0],E=y[1],_=(0,d.useLayoutData)().mode;return i.createElement(u.Dropdown,(0,o.default)({content:i.createElement(h,{className:l()({"ActionsMenu--dropdown":"two-column"===_})},t),openType:c},"two-column"===_?{position:"right",align:"left"}:{position:"bottom",align:"right"},{classNames:{trigger:"ActionsMenu--dropdown-trigger"},adaptation:"vertical",onOpen:function(){return E(!0)},onClose:function(){return E(!1)},hideOnClick:v}),i.createElement(m,(0,o.default)({},g,{className:w&&"ActionsMenuAction--active",leftIcon:n,rightIcon:i.createElement(s.default,null)})))},b=function(e){var t=e.className;return i.createElement("div",{role:"separator",className:l()("ActionsMenuAction__separator",t)})}},81758:(e,t,n)=>{"use strict";n.d(t,{AttachAudio:()=>v});var r=n(22559),o=n(56568),a=n(67294),i=n(20700),c=n.n(i),l=n(21705),s=n(84970),u=n(88751);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=a.memo((function(e){var t=e.audio,n=(0,s.useBrowserEnv)().player,r=(0,a.useContext)(u.ConvoAudiosPlaylistContext),i=(0,a.useState)("stopped"),d=(0,o.default)(i,2),v=d[0],h=d[1],m=(0,a.useState)(0),g=(0,o.default)(m,2),b=g[0],y=g[1],w=(0,a.useRef)("".concat(t.ownerId,"_").concat(t.id)),E=(0,a.useCallback)((function(e){var t=e.currentAudioTrack,n=e.status;if(t&&t.id===w.current){var r=t.progress;h(n),y(r)}}),[]);(0,a.useEffect)((function(){return n.subscribe("stateupdated",E),function(){n.unsubscribe("stateupdated",E)}}),[t,E,n]),(0,a.useEffect)((function(){E(n.getState())}),[]);var _=(0,a.useCallback)((function(e){if(t.url){if("playing"===v)n.pause();else{var o=r();n.play(f(f({},t),{},{progress:b,id:"".concat(t.ownerId,"_").concat(t.id)}),o)}e.preventDefault()}}),[t,v,n,r,b]);return a.createElement("div",{className:c()("AttachAudio",{"AttachAudio--active":"playing"===v||"paused"===v,"AttachAudio--playing":"playing"===v})},a.createElement("button",{className:"AttachAudio__play",onClick:_},a.createElement("div",{className:c()("AttachAudio__playIcon","playing"===v&&"AttachAudio__playIcon--playing")},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:8,height:10,fill:"currentColor"},"playing"!==v&&a.createElement("path",{d:"M1.54 9.4A1 1 0 010 8.58V1.43A1 1 0 011.54.59l5.9 3.82a.7.7 0 010 1.18L1.54 9.4z"}),"playing"===v&&a.createElement("path",{d:"M.6 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H.6zm5 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H5.6z"})))),a.createElement("div",{className:"AttachAudio__title"},t.title),a.createElement("div",{className:"AttachAudio__artist"},t.artist),a.createElement("div",{className:"AttachAudio__duration","data-filler":p(t.duration)},a.createElement("div",{className:"AttachAudio__durationIn"},"playing"===v||"paused"===v?function(e,t){var n=Math.floor(t*(1-e));return"-"+(0,l.formatDuration)(n)}(b,t.duration):(0,l.formatDuration)(t.duration))))}));function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?"-":"";return n+Math.floor(e/60).toString().split("").fill("0").join("")+":00"}},70722:(e,t,n)=>{"use strict";n.d(t,{AttachDoc:()=>m});var r=n(67294),o=n(56568),a=n(51225),i=n(40637),c=n(59590),l=n(54629),s=n(84970),u=n(87075),d=function(e){var t=e.doc,n=e.meta,d=e.isInBubble,f=void 0!==d&&d,v=e.forwardLevel,p=void 0===v?0:v,h=(0,r.useState)(!1),m=(0,o.default)(h,2),g=m[0],b=m[1],y=(0,s.usePixelDensity)(),w="gif"===t.ext,E=(0,u.getExpectedAttachWidth)(y,f,p,232),_=(0,o.default)(E,2),C=_[0],k=_[1],O=a.preview(t,k);if(!O)return null;var A=Math.min(O.width,C),x=Math.ceil(O.height/O.width*A);return r.createElement(i.Link,{href:t.url,className:"AttachDocPreview",style:{width:A,height:x},download:!w,onClick:w?function(e){b((function(e){return!e})),e.preventDefault()}:void 0,target:w?void 0:"_blank"},w&&!g&&r.createElement("div",{className:"AttachDocPreview__play"},r.createElement(l.default,null)),r.createElement("img",{src:g?t.url:O.url,alt:t.title}),r.createElement(c.ComposerAttachPreviewMeta,{rounded:!0,top:!0,left:!0},n))},f=n(74877),v=n(21705),p=n(20700),h=n.n(p),m=function(e){var t=e.doc,n=e.withoutPreview,o=void 0!==n&&n,a=e.isInBubble,c=void 0!==a&&a,l=e.forwardLevel,s=void 0===l?0:l,u=e.isOut,p=void 0!==u&&u,m=t.ext.toUpperCase()+" · "+(0,v.formatFileSize)(t.size);return!o&&t.image?r.createElement(d,{doc:t,meta:m,isInBubble:c,forwardLevel:s}):r.createElement(i.Link,{href:t.url,target:"_blank",className:"AttachDoc",download:!0},r.createElement("figure",{className:h()("AttachDoc__icon",{"AttachDoc__icon--isOut":p})},r.createElement(f.default,null)),r.createElement("div",{className:"AttachDoc__title"},t.title),r.createElement("div",{className:"AttachDoc__meta"},m))}},15134:(e,t,n)=>{"use strict";n.d(t,{AttachVideos:()=>g,getDuration:()=>b});var r=n(22559),o=n(67294),a=n(51225),i=n(84970),c=n(20700),l=n.n(c),s=n(54629),u=n(21705),d=n(40637),f=n(87075),v=n(61513),p=n(25834);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.videos,n=e.forwardLevel,r=void 0===n?0:n,c=e.additionalLinkPayload,u=(0,i.useBrowserEnv)().navigate,h=(0,f.getAttachForwardIndent)(r),g=(0,v.useImagesLayout)(),y=g.width,w=g.minHeight,E=g.maxSingleHeight,_=g.preferredRatio,C=y-h,k=1===t.length,O=(0,o.useMemo)((function(){return t.reduce((function(e,t){return e+"__"+t.id}),"".concat(C,"__").concat(w,"__").concat(_))}),[t,C,w,_]),A=(0,o.useMemo)((function(){var e=t.reduce((function(e,t){var n=a.preview(t,C);return n&&e.push(m(m({},n),{},{videoAttach:t})),e}),[]);return e.length?(0,p.computeAttachePhotosLayout)(_,C,{minHeight:w,maxSingleHeight:E},e):null}),[t,w,E,_,C]);return A?o.createElement("div",{className:"AttachVideos AttachVideos--inBubble",style:{maxWidth:k?"max-content":C}},A.map((function(e,n){return o.createElement("div",{className:"AttachVideos__layoutRow",key:"".concat(n,"__").concat(O)},e.map((function(e){var n,r,a=e.width,i=e.height,f=e.url,v=e.videoAttach,p=v.id,h=v.duration,m=v.platform,g=v.files,y=v.restriction,w=1===(null==y?void 0:y.blur),E=0===(null==y?void 0:y.can_play),_=b(h,!(null==g||!g.external))||m;return o.createElement(d.Link,{className:"AttachVideos__link",href:u.getAttachLink(v,c),payload:{kind:"attachMedia",attach:v,source:c},key:p},o.createElement("img",{style:{width:a,height:i},src:f,alt:"",className:l()("AttachVideos__img",{AttachVideos__previewBackdrop:w||E})}),!w&&o.createElement(o.Fragment,null,t.length<=3&&o.createElement("div",{className:"AttachVideos__videoPlay"},o.createElement(s.default,null)),_&&o.createElement("div",{className:"AttachVideos__videoInfo"},_)),(w||E)&&o.createElement("div",{className:"AttachVideos__videoRestrictionWrap"},o.createElement("div",{className:"AttachVideos__videoIconRestriction",style:{backgroundImage:"url('".concat(null==y||null===(n=y.card_icon)||void 0===n||null===(r=n.slice(-1).pop())||void 0===r?void 0:r.url,"')"),filter:"invert(100%)"}}),void 0!==(null==y?void 0:y.title)&&o.createElement("div",null,y.title)))})))}))):null};function b(e,t){return void 0===e?"":!t||t&&e?(0,u.formatDuration)(e):""}},59590:(e,t,n)=>{"use strict";n.d(t,{ComposerAttachPreviewMeta:()=>s});var r=n(22559),o=n(67294),a=n(20700),i=n.n(a);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){var t=e.children,n=e.rounded,r=e.offsetLength,a=void 0===r?5:r,c=e.top,s=e.right,u=e.bottom,d=e.left,f=["ComposerAttachPreviewMeta",{"ComposerAttachPreviewMeta--rounded":n}],v=a+"px",p=l(l(l(l({},c&&{top:v}),s&&{right:v}),u&&{bottom:v}),d&&{left:v});return o.createElement("div",{className:i()(f),style:p},t)}},71059:(e,t,n)=>{"use strict";n.d(t,{ConvoAttachments:()=>J});var r=n(67846),o=n(56568),a=n(43883),i=n.n(a),c=n(67294),l=n(44801),s=n(81758),u=n(70722),d=n(9727),f=n(80662),v=n(71851),p=n(22559),h=n(84970),m=n(3460),g=n(21705),b=n(37021);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n,r,o){return _.apply(this,arguments)}function _(){return(_=(0,r.default)(i().mark((function e(t,n,r,o,a){var c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetch("messages.getHistoryAttachments",{peer_id:n,media_type:C(o),count:30,start_from:a,group_id:(0,b.getOwnerGroupId)(r)},{retries:5});case 3:if((c=e.sent).items&&0!==c.items.length){e.next=6;break}return e.abrupt("return",(0,p.default)({},o,{items:[],isAllLoaded:!0,cursorNextLoad:null}));case 6:return l=(0,m.fromApiConvoAttach)(c.items)[o]||[],e.abrupt("return",(0,p.default)({},o,{items:l,isAllLoaded:0===l.length||l.length<30,cursorNextLoad:c.next_from}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var C=function(e){return{audios:"audio",videos:"video",docs:"doc",links:"link",photos:"photo"}[e]};function k(e,t,n){e[n]||function(e,t){switch(t){case"audios":case"videos":case"docs":case"links":case"photos":e[t]={items:[],cursorNextLoad:null,isAllLoaded:!1};break;default:(0,g.exhaustivenessCheck)(t)}}(e,n);var r=e[n];r&&(r.isLoading=t)}function O(e,t){var n,r,o,a,i;t.audios&&(e.audios={items:((null===(n=e.audios)||void 0===n?void 0:n.items)||[]).concat(t.audios.items),cursorNextLoad:t.audios.cursorNextLoad||null,isAllLoaded:t.audios.isAllLoaded});t.docs&&(e.docs={items:((null===(r=e.docs)||void 0===r?void 0:r.items)||[]).concat(t.docs.items),cursorNextLoad:t.docs.cursorNextLoad||null,isAllLoaded:t.docs.isAllLoaded});t.links&&(e.links={items:((null===(o=e.links)||void 0===o?void 0:o.items)||[]).concat(t.links.items),cursorNextLoad:t.links.cursorNextLoad||null,isAllLoaded:t.links.isAllLoaded});t.photos&&(e.photos={items:((null===(a=e.photos)||void 0===a?void 0:a.items)||[]).concat(t.photos.items),cursorNextLoad:t.photos.cursorNextLoad||null,isAllLoaded:t.photos.isAllLoaded});t.videos&&(e.videos={items:((null===(i=e.videos)||void 0===i?void 0:i.items)||[]).concat(t.videos.items),cursorNextLoad:t.videos.cursorNextLoad||null,isAllLoaded:t.videos.isAllLoaded})}var A=n(14957),x=n(80312),P=n(51225),N=n(40637),M=n(84839),L=n(94941),S=n(85561),j=n(50485),D=n(66600),I=function(e){var t=e.photos,n=e.tailWatchBind,r=e.goToMessage,a=e.isCasper,i=(0,h.useBrowserEnv)().api,l=(0,c.useState)(0),s=(0,o.default)(l,2),u=s[0],d=s[1],f=(0,c.useRef)(null),v=(0,c.useState)([]),p=(0,o.default)(v,2),m=p[0],b=p[1];(0,c.useLayoutEffect)((function(){if(window.IntersectionObserver&&0===u&&f.current){var e=new ResizeObserver((function(t){var n;t[0]&&d(t[0].contentRect.width),0===(null===(n=t[0])||void 0===n?void 0:n.contentRect.width)&&e.disconnect()}));return e.observe(f.current),function(){e.disconnect()}}}),[]);var y=(0,c.useCallback)((function(e,t){switch(e){case"set_as_avatar":case"copy_link":case"download":case"tag_item":case"tag_service":break;case"delete":i.fetch("photos.delete",{photo_id:t.attach.id,owner_id:t.attach.ownerId}).then((function(){b([].concat((0,x.default)(m),[t.attach.id]))}));break;case"restore":i.fetch("photos.restore",{photo_id:t.attach.id,owner_id:t.attach.ownerId}).then((function(){b(m.filter((function(e){return e!==t.attach.id})))}));break;case"go_to_message":r(t.messageId);break;default:(0,g.exhaustivenessCheck)(e)}}),[r,i,m]);return c.createElement("ul",{className:"ConvoAttachesPhotos"},t.map((function(e,t,r){var o=0===t,i=t===r.length-1,l=0!==u?function(e,t){var n=P.preview(e,t,t,!1),r=P.preview(e,2*t,2*t,!1);if(!n&&!r)return null;if(!n||!r)return{src:n?n.url:r?r.url:""};return{srcSet:"".concat(n.url,", ").concat(r.url," 2x"),src:r.url}}(e.attach,u):void 0;return c.createElement(R,{key:"".concat(e.cmid,"-").concat(e.attach.id),isDeleted:m.includes(e.attach.id),isCasper:a,photo:e,photoSource:l||void 0,tailWatchBind:i?n:void 0,measuredElRef:o?f:void 0,onActionClick:y})})))},R=function(e){var t=e.photo,n=(e.isCasper,e.measuredElRef),r=e.tailWatchBind,o=e.photoSource,a=e.isDeleted,i=e.onActionClick,l=(0,h.useBrowserEnv)(),s=l.lang,u=l.navigate,d=(0,c.useMemo)((function(){return c.createElement(c.Fragment,null,c.createElement(D.ActionsMenuAction,{key:"action_go_to_message",onClick:function(){return i("go_to_message",t)},title:s.use("me_attach_action_go_to_message"),leftIcon:c.createElement(L.default,null),type:"primary"}),c.createElement(D.ActionsMenuAction,{key:"action_delete",onClick:function(){return i("delete",t)},title:s.use("me_attach_action_delete_photo"),leftIcon:c.createElement(S.default,null),type:"danger"}))}),[s,t,i]),f={kind:"message",peerId:t.peerId,cmid:t.cmid};return c.createElement("li",{className:"ConvoAttachesPhotos__item",ref:n},r&&c.createElement("div",{className:"ConvoAttachesPhotos__tail",ref:r}),o&&!a&&c.createElement(c.Fragment,null,c.createElement(N.Link,{href:u.getAttachLink(t.attach,f),payload:{kind:"attachMedia",attach:t.attach,source:f},target:"_blank",rel:"noreferrer",key:t.attach.id,className:"ConvoAttachesPhotos__link"},c.createElement("img",(0,A.default)({},o,{alt:"",className:"ConvoAttachPhoto__img"}))),c.createElement(M.Dropdown,{classNames:{wrapper:"ConvoAttachPhoto__dropdown"},content:c.createElement(D.ActionsMenu,{className:"ConvoActionsMenu"},d),align:"center",position:"left",hideOnClick:!0},c.createElement("button",{className:"ConvoAttachPhoto__action","aria-label":s.use("me_actions_more")},c.createElement(j.default,null)))),o&&a&&c.createElement("div",{className:"ConvoAttachesPhotos__restore"},c.createElement("div",{className:"ConvoAttachesPhoto__restore-button",onClick:function(){return i("restore",t)}},s.use("me_attach_action_restore"))))};var T=n(20700),B=n.n(T),H=n(15134),V=function(e){var t=e.videos,n=e.tailWatchBind,r=e.goToMessage,a=(0,c.useState)(0),i=(0,o.default)(a,2),l=i[0],s=i[1],u=(0,h.useBrowserEnv)().api,d=(0,c.useRef)(null),f=(0,c.useState)([]),v=(0,o.default)(f,2),p=v[0],m=v[1],b=(0,h.useViewer)().viewer;(0,c.useLayoutEffect)((function(){if(window.IntersectionObserver&&0===l&&d.current){var e=new ResizeObserver((function(t){var n;t[0]&&s(t[0].contentRect.width),0===(null===(n=t[0])||void 0===n?void 0:n.contentRect.width)&&e.disconnect()}));return e.observe(d.current),function(){e.disconnect()}}}),[]);var y=(0,c.useCallback)((function(e,t){switch(e){case"go_to_message":r(t.messageId);break;case"delete_from_own":u.fetch("video.delete",{video_id:t.attach.id,owner_id:t.attach.ownerId,target_id:b.id}).then((function(){m([].concat((0,x.default)(p),[t.attach.id]))}));break;case"restore":u.fetch("video.restore",{video_id:t.attach.id,owner_id:t.attach.ownerId}).then((function(){m(p.filter((function(e){return e!==t.attach.id})))}));break;case"copy_link":case"download":case"report":case"share":case"add":case"add_to_playlist":break;default:(0,g.exhaustivenessCheck)(e)}}),[r,u,p,b.id]);return c.createElement("ul",{className:"ConvoAttachesVideos"},t.map((function(e,t,r){var o,a,i=0===t,s=t===r.length-1,u=0!==l?function(e,t){var n=P.preview(e,t),r=P.preview(e,2*t);if(!n&&!r)return null;if(!n||!r)return{src:n?n.url:r?r.url:""};return{srcSet:"".concat(n.url,", ").concat(r.url," 2x"),src:r.url}}(e.attach,l):void 0,f=1===(null===(o=e.attach.restriction)||void 0===o?void 0:o.blur),v=0===(null===(a=e.attach.restriction)||void 0===a?void 0:a.can_play);return c.createElement(F,{key:"".concat(e.cmid,"-").concat(e.attach.id),measuredElRef:i?d:void 0,tailWatchBind:s?n:void 0,isDeleted:p.includes(e.attach.id),onActionClick:y,video:e,isBlur:f,videoSource:u||void 0,canNotPlay:v})})))},F=function(e){var t,n,r,o,a=e.video,i=e.tailWatchBind,l=e.videoSource,s=e.isDeleted,u=e.measuredElRef,d=e.isBlur,f=e.canNotPlay,v=e.onActionClick,p="ME"!==(0,h.useAppSource)(),m=(0,h.useBrowserEnv)(),g=m.lang,b=m.navigate,y=a.attach,w=y.duration,E=y.title,_=y.views,C=y.platform,k=y.files,O=(0,H.getDuration)(w,!(null==k||!k.external))||C,x=(0,c.useMemo)((function(){return c.createElement(c.Fragment,null,c.createElement(D.ActionsMenuAction,{key:"action_go_to_message",onClick:function(){return v("go_to_message",a)},title:g.use("me_attach_action_go_to_message"),leftIcon:c.createElement(L.default,null),type:"primary"}))}),[g,a,v]);return c.createElement("li",{className:"ConvoAttachesVideos__item",ref:u},i&&c.createElement("div",{className:"ConvoAttachesVideos__tail",ref:i}),c.createElement("div",{className:"ConvoAttachesVideos__preview"},l&&!s&&c.createElement(c.Fragment,null,c.createElement(N.Link,{href:b.getAttachLink(a.attach),payload:{kind:"attachMedia",attach:a.attach},target:"_blank",rel:"noreferrer",className:B()({ConvoAttachesVideo__link:p||d||f,ConvoAttachesVideo__play:!p})},c.createElement("img",(0,A.default)({},l,{alt:"",className:B()("ConvoAttachesVideo__img",{"ConvoAttachesVideo__img--restriction":d})})),d&&c.createElement("div",{className:"ConvoAttachVideoResctrictionWrap"},c.createElement("div",{className:"ConvoAttachVideoIconRestriction",style:{backgroundImage:"url('".concat(null===(t=a.attach.restriction)||void 0===t||null===(n=t.card_icon)||void 0===n||null===(r=n.slice(-1).pop())||void 0===r?void 0:r.url,"')"),filter:"invert(100%)"}}),void 0!==(null===(o=a.attach.restriction)||void 0===o?void 0:o.title)&&c.createElement("div",null,a.attach.restriction.title))),c.createElement(M.Dropdown,{classNames:{wrapper:"ConvoAttachVideo__dropdown"},content:c.createElement(D.ActionsMenu,{className:"ConvoActionsMenu"},x),align:"center",position:"left",hideOnClick:!0},c.createElement("button",{className:"ConvoAttachVideo__action","aria-label":g.use("me_actions_more")},c.createElement(j.default,null)))),l&&s&&c.createElement("div",{className:"ConvoAttachesVideos__restore"},c.createElement("div",{className:"ConvoAttachesVideos__restore-button",onClick:function(){v("restore",a)}},g.use("me_attach_action_restore"))),O&&c.createElement("div",{className:"ConvoAttachesVideos__info"},O)),c.createElement("div",{className:"ConvoAttachesVideo__title"},E),c.createElement("div",{className:"ConvoAttachesVideo__views"},g.use("me_convo_attaches_video_views",{num:_,values:{count:g.formatNumber(_,"short")}})))};var G=n(93708);const U=(0,G.makeIcon)("Icon24MessageArrowRightOutline","message_arrow_right_outline_24","0 0 24 24",'<symbol fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="message_arrow_right_outline_24"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M12.016 4.9c-3.077 0-5.702 1.444-7.065 3.5a.9.9 0 0 1-1.5-.995C5.178 4.799 8.395 3.1 12.016 3.1c5.324 0 9.884 3.729 9.884 8.607 0 4.878-4.56 8.607-9.884 8.607-1.173 0-2.3-.178-3.348-.506C7.42 20.961 5.616 21.513 3.42 21.6c-.927.036-1.598-.927-1.209-1.792.529-1.183 1.197-2.403 1.298-3.72a8.205 8.205 0 0 1-.34-.54.9.9 0 0 1 1.56-.898c.124.216.262.426.413.629a.9.9 0 0 1 .177.537c0 1.38-.54 2.684-1.099 3.92 1.714-.194 2.835-.75 3.513-1.547a.9.9 0 0 1 1.002-.26c1 .376 2.11.586 3.28.586 4.6 0 8.085-3.172 8.085-6.807 0-3.635-3.485-6.807-8.084-6.807z" /><path d="M10.864 8.264a.9.9 0 0 1 1.272 0l2.6 2.6a.9.9 0 0 1 0 1.272l-2.6 2.6a.9.9 0 0 1-1.272-1.272l1.063-1.064H2.9a.9.9 0 1 1 0-1.8h9.027l-1.063-1.064a.9.9 0 0 1 0-1.272z" /></g></symbol>',24,24,!1,void 0);var z=function(e){e.document;var t=e.messageId,n=e.goToMessage,r=(0,h.useBrowserEnv)().lang,o=(0,c.useCallback)((function(e){switch(e){case"share":return;case"go_to_message":return void n(t);default:return(0,g.exhaustivenessCheck)(e)}}),[t,n]);return c.createElement(D.ActionsMenu,null,c.createElement(D.ActionsMenuAction,{title:r.use("me_attach_action_go_to_message"),leftIcon:c.createElement(U,null),onClick:function(){return o("go_to_message")},type:"primary"}))},K=function(e){e.audio;var t=e.messageId,n=e.goToMessage,r=(0,h.useBrowserEnv)().lang,o=(0,c.useCallback)((function(e){switch(e){case"share":return;case"go_to_message":return void n(t);default:return(0,g.exhaustivenessCheck)(e)}}),[t,n]);return c.createElement(D.ActionsMenu,null,c.createElement(D.ActionsMenuAction,{onClick:function(){return o("go_to_message")},title:r.use("me_attach_action_go_to_message"),leftIcon:c.createElement(U,null),type:"primary"}))},W=n(83704);const Z=(0,G.makeIcon)("Icon20ChevronRightOutline","chevron_right_outline_20","0 0 20 20",'<symbol viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" id="chevron_right_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.47 4.217a.75.75 0 0 0 0 1.06L12.185 10l-4.716 4.72a.75.75 0 1 0 1.062 1.06l5.245-5.25a.75.75 0 0 0 0-1.061L8.531 4.218a.75.75 0 0 0-1.061-.001z" fill="currentColor" /></symbol>',20,20,!1,void 0);var $=function(e){var t,n=e.links,r=e.tailWatchBind,o=e.goToMessage,a=(0,h.useBrowserEnv)().lang;return t=new Set,c.createElement("ul",null,n.map((function(e,i){var l=i===n.length-1,s="".concat(e.cmid,"_").concat(e.attach.url),u=t.has(s)?"".concat(s,"_").concat(i):s;return t.add(s),c.createElement("li",{key:u},l&&r&&c.createElement("div",{ref:r}),c.createElement(N.Link,{href:e.attach.url,target:"_blank",className:"ConvoAttachesLink"},c.createElement("div",null,c.createElement("div",{className:"ConvoAttachesLink__image-container"},function(e){var t="";if(e.image){var n=(0,P.preview)(e,48,48,!0);n&&(t=n.url)}return t?c.createElement("img",{src:t,className:"ConvoAttachesLink__image"}):c.createElement("div",{className:"ConvoAttachesLink__image"})}(e.attach))),c.createElement("div",{className:"ConvoAttachesLink__content"},c.createElement("div",{className:"ConvoAttachesLink__name"},e.attach.title),c.createElement("div",{className:"ConvoAttachesLink__url"},e.attach.url)),c.createElement("div",{className:"ConvoAttachesLink__actions"},c.createElement(W.Tooltip,{content:a.use("me_convo_attaches_to_message"),position:"top",align:"center",delay:500},c.createElement("div",{className:"ConvoAttachesLink__button",onClick:function(t){t.stopPropagation(),t.preventDefault(),o(e.messageId)}},c.createElement(Z,null))))))})))},q=n(53273),X=n(27346),Y=function(e){var t=e.children,n=e.initialPosition,r=void 0===n?0:n,a=e.step,i=e.className,l=(0,c.useRef)(null),s=(0,c.useRef)(null),u=(0,c.useState)(!1),d=(0,o.default)(u,2),f=d[0],v=d[1],p=(0,c.useState)(!1),h=(0,o.default)(p,2),m=h[0],g=h[1],b=(0,c.useCallback)((function(e){return e.clientWidth<e.scrollWidth}),[]),y=function(){if(a)return a;var e=l.current;return e?e.clientWidth/2:100},w=(0,c.useCallback)((function(){var e=l.current;return e?e.scrollWidth-e.clientWidth:null}),[l]),E=function(e){var t;null===(t=l.current)||void 0===t||t.scrollTo({left:e,behavior:"smooth"})},_=(0,c.useCallback)((function(){var e=l.current,t=w();if(e&&b(e)&&null!==t){var n=Math.ceil(e.scrollLeft);v(0!==n),g(n<t)}}),[l,b,v,g,w]);return(0,c.useLayoutEffect)((function(){var e=l.current;e&&(e.scrollLeft=r)}),[l,r]),(0,c.useLayoutEffect)((function(){return _(),window.addEventListener("resize",_),function(){return window.removeEventListener("resize",_)}}),[_]),c.createElement("div",{className:B()("AdaptiveScroll",i)},c.createElement("div",{ref:l,className:"AdaptiveScroll__wrapper",onScroll:_},c.createElement("div",{ref:s,className:"AdaptiveScroll__scrollable"},t)),c.createElement("button",{className:B()("AdaptiveScroll__button AdaptiveScroll__button--backwards",{"AdaptiveScroll__button--visible":f}),onClick:function(){var e=l.current;if(e){var t=e.scrollLeft;if(0!==t){var n=Math.max(t-y(),0);n<50&&(n=0),E(n)}}}},c.createElement(q.default,null)),c.createElement("button",{className:B()("AdaptiveScroll__button AdaptiveScroll__button--forward",{"AdaptiveScroll__button--visible":m}),onClick:function(){var e=l.current;if(e){var t=e.scrollLeft,n=w();if(null!==n&&t!==n){var r=Math.min(t+y(),n);n-r<50&&(r=n),E(r)}}}},c.createElement(X.default,null)))},J=function(e){var t=e.convo,n=e.goToMessage,a=e.className,p=(0,c.useState)("photos"),m=(0,o.default)(p,2),g=m[0],y=m[1],_=function(e){var t=(0,c.useState)(null),n=(0,o.default)(t,2),a=n[0],l=n[1],s=(0,h.useBrowserEnv)().api,u=(0,h.useOwner)(),d=(0,c.useCallback)(function(){var t=(0,r.default)(i().mark((function t(n){var r,o,c,d,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!==(r=(d=a||{})[n])&&void 0!==r&&r.isLoading||null!==(o=d[n])&&void 0!==o&&o.isAllLoaded)){t.next=3;break}return t.abrupt("return");case 3:return k(d,!0,n),l(w({},d)),t.next=7,E(s,e,u.id,n,(null===(c=d[n])||void 0===c?void 0:c.cursorNextLoad)||void 0);case 7:f=t.sent,O(d,f),k(d,!1,n),l(w({},d));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[s,a,u.id,e]);return{attaches:a,getNextPage:d}}(t.peerId),C=_.attaches,A=_.getNextPage,x=(0,c.useRef)(),P=(0,h.useBrowserEnv)(),N=P.lang,L=P.api,S=(0,h.useOwner)(),D=(0,c.useCallback)((function(e){if(e)return x.current=new IntersectionObserver(function(){var e=(0,r.default)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t[0])||void 0===n||!n.isIntersecting){e.next=3;break}return e.next=3,A(g);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x.current.observe(e),function(){var e;return null===(e=x.current)||void 0===e?void 0:e.disconnect()}}),[g,A]),R=function(e){e!==g&&(C&&!C[e]&&A(e),y(e))},T=(0,c.useRef)(null),H=function(){var e=(0,r.default)(i().mark((function e(t){var r,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T.current=t,e.next=4,L.fetch("messages.getById",{message_ids:t.toString(),group_id:(0,b.getOwnerGroupId)(S.id),extended:0});case 4:if(r=e.sent,a=(0,o.default)(r.items,1),c=a[0]){e.next=9;break}throw new Error("Неожиданный ответ сервера");case 9:if(f.resolveId(c.id)===T.current){e.next=11;break}return e.abrupt("return");case 11:n(f.resolveCmid(c.conversation_message_id)),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();if((0,c.useEffect)((function(){null===C&&A(g)})),!C)return null;var F=C[g];return c.createElement("div",{className:B()("ConvoAttachments",a)},c.createElement(Y,{className:"ConvoAttachments__tabsScroll"},c.createElement(l.Tabs,{className:"ConvoAttachments_tabs"},c.createElement(l.TabsItem,{onClick:function(){return R("photos")},selected:"photos"===g},N.use("me_convo_attaches_type_photo")),c.createElement(l.TabsItem,{onClick:function(){return R("videos")},selected:"videos"===g},N.use("me_convo_attaches_type_video")),c.createElement(l.TabsItem,{onClick:function(){return R("audios")},selected:"audios"===g},N.use("me_convo_attaches_type_music")),c.createElement(l.TabsItem,{onClick:function(){return R("docs")},selected:"docs"===g},N.use("me_convo_attaches_type_doc")),c.createElement(l.TabsItem,{onClick:function(){return R("links")},selected:"links"===g},N.use("me_convo_attaches_type_links")))),C&&c.createElement("div",{className:"ConvoAttachments__block"},function(){var e,n;if(null==F||!F.items||0===(null==F?void 0:F.items.length))return null;switch(g){case"audios":return c.createElement("ul",{className:"ConvoAttachments__list"},null==F?void 0:F.items.map((function(e,t,n){var r=e.attach,o=n.length===t+1&&!(null!=F&&F.isLoading)&&!(null!=F&&F.isAllLoaded);return"Audio"!==r.kind?null:c.createElement("li",{key:"".concat(e.cmid,"-").concat(r.id)},o&&c.createElement("div",{ref:D}),c.createElement("div",{className:"ConvoAttachments__itemContainer"},c.createElement("div",{className:"ConvoAttachments__item"},c.createElement(s.AttachAudio,{audio:r})),c.createElement(M.Dropdown,{hideOnClick:!0,content:c.createElement(K,{audio:r,messageId:e.messageId,goToMessage:H}),align:"right",position:"bottom"},c.createElement("button",{className:"ConvoAttachments__itemMenuButton"},c.createElement(j.default,null)))))})));case"docs":return c.createElement("ul",{className:"ConvoAttachments__list"},null==F?void 0:F.items.map((function(e,t,n){var r=e.attach,o=n.length===t+1&&!(null!=F&&F.isLoading)&&!(null!=F&&F.isAllLoaded);return"Doc"!==r.kind?null:c.createElement("li",{className:"ConvoAttachments__listItem ConvoAtachments__docItem",key:"".concat(e.cmid,"-").concat(r.id)},o&&c.createElement("div",{ref:D}),c.createElement("div",{className:"ConvoAttachments__itemContainer"},c.createElement("div",{className:"ConvoAttachments__item"},c.createElement(u.AttachDoc,{doc:r,withoutPreview:!0})),c.createElement(M.Dropdown,{hideOnClick:!0,content:c.createElement(z,{document:r,messageId:e.messageId,goToMessage:H}),align:"center",position:"left"},c.createElement("button",{className:"ConvoAttachments__itemMenuButton"},c.createElement(j.default,null)))))})));case"links":var r=C[g];if(!r)return null;var o=!r.isAllLoaded&&!r.isLoading;return c.createElement($,{links:r.items,goToMessage:H,tailWatchBind:o?D:void 0});case"photos":var a=null===(e=C[g])||void 0===e?void 0:e.items;if(!a)return null;var i=!(null!=F&&F.isLoading||null!=F&&F.isAllLoaded);return c.createElement(I,{photos:a,tailWatchBind:i?D:void 0,isCasper:d.isCasper(t),goToMessage:H},c.createElement("div",{ref:D}));case"videos":var l=null===(n=C[g])||void 0===n?void 0:n.items;if(!l)return null;var f=!(null!=F&&F.isLoading||null!=F&&F.isAllLoaded);return c.createElement(V,{videos:l,tailWatchBind:f?D:void 0,goToMessage:H},c.createElement("div",{ref:D}));default:return null}}(),(!F||F.isLoading)&&c.createElement(v.OptimizedSpinner,{className:"ConvoAttachments__loader"}),F&&!F.isLoading&&0===F.items.length&&c.createElement("div",{className:"ConvoAttachments__empty"},N.use("me_convo_attaches_empty_type"))))}},61513:(e,t,n)=>{"use strict";n.d(t,{ImagesLayoutProvider:()=>a,useImagesLayout:()=>i});var r=n(67294),o=r.createContext(void 0),a=o.Provider,i=function(){var e=(0,r.useContext)(o);if(!e)throw Error("Все аттачи фото должны сопровождаться контекстом размеров");return e}},84839:(e,t,n)=>{"use strict";n.d(t,{Dropdown:()=>g});var r=n(14957),o=n(22559),a=n(56568),i=n(16790),c=n(67294),l=n(29697),s=n(27415),u=n(20700),d=n.n(u),f=n(21705),v=n(84970),p=n(36698),h=["openType","delay","hideDelay","classNames","content","children","hideOnClick","open","onOpen","onClose","forceUpdateContent"],m=(0,c.createContext)(void 0),g=function(e){var t,n=e.openType,u=void 0===n?"hover":n,g=e.delay,b=e.hideDelay,y=void 0===b?150:b,w=e.classNames,E=void 0===w?{}:w,_=e.content,C=e.children,k=e.hideOnClick,O=e.open,A=void 0!==O&&O,x=e.onOpen,P=e.onClose,N=e.forceUpdateContent,M=(0,i.default)(e,h),L=(0,c.useState)(!1),S=(0,a.default)(L,2),j=S[0],D=S[1],I=(0,v.usePrevious)(j),R=(0,c.useState)(_),T=(0,a.default)(R,2),B=T[0],H=T[1],V=function(e){var t=e.open,n=e.openType,r=e.delay,o=e.hideDelay,i=e.childOpen,l=(0,c.useState)("closed"),s=(0,a.default)(l,2),u=s[0],d=s[1],p=(0,c.useRef)(null),h=(0,c.useRef)(null),g=function(e){var t=e.delay,n=e.hideDelay,r=e.openType,o=e.displayState,a=e.setDisplayState,i=e.$content,l=e.$trigger,s=e.childOpen,u=(0,c.useRef)(null),d=(0,c.useRef)(null),f=(0,c.useRef)(null),v=(0,c.useRef)(o);v.current=o;var p=(0,c.useRef)(s);p.current=s;var h=(0,c.useContext)(m),g=(0,c.useCallback)((function(e){e.current&&(window.clearTimeout(e.current),e.current=null)}),[]),b=(0,c.useCallback)((function(){f.current&&(window.cancelAnimationFrame(f.current),f.current=null)}),[]),y=(0,c.useRef)(!0),w=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("hover"===r){g(u);var o="closed"===v.current||"closing"===v.current;if(!d.current&&!o){y.current=t;var i=function(){a((function(e){return"opened"===e?"closing":"closed"})),g(d)};e&&"opened"===v.current?d.current=window.setTimeout(i,e):i(),null==h||h.setChildOpen(!1)}}}),[h,r,g,a,n]),E=(0,c.useCallback)((function(){if("hover"===r){g(d);var e="opened"===v.current||"opening"===v.current;if(!u.current&&!e){y.current=!0;var n=function(){a((function(e){return"closed"===e?"opening":"opened"})),g(u)};t&&"closed"===v.current?u.current=window.setTimeout(n,t):n(),null==h||h.setChildOpen(!0)}}}),[t,h,r,a,g]);return(0,c.useEffect)((function(){var e=function(){var e,t;null!==(e=l.current)&&void 0!==e&&e.matches(":hover")||null!==(t=i.current)&&void 0!==t&&t.matches(":hover")||p.current?"closing"===v.current&&y.current&&E():w()},t=function(){b(),f.current=window.requestAnimationFrame(e)};return"hover"===r&&"closed"!==o&&(t(),document.addEventListener("mousemove",t,{passive:!0}),document.addEventListener("wheel",t,{passive:!0})),function(){document.removeEventListener("mousemove",t),document.removeEventListener("wheel",t)}}),[i,l,o,w,E,r,b]),(0,c.useEffect)((function(){return function(){g(u),g(d),b()}}),[]),{onMouseOver:E,hideOnHover:w}}({delay:r,hideDelay:o,openType:n,displayState:u,setDisplayState:d,$content:p,$trigger:h,childOpen:i}),b=g.hideOnHover,y=g.onMouseOver,w=function(e){var t=e.$content,n=e.openType,r=e.setDisplayState,o=(0,c.useCallback)((function(e){"click"===n&&(null==e||e.stopPropagation(),r((function(e){switch(e){case"opening":return"closed";case"closed":return"opening";case"opened":case"closing":return"closing";default:return(0,f.exhaustivenessCheck)(e)}})))}),[n,r]);return(0,c.useEffect)((function(){var e=function(e){e.stopPropagation(),"click"===n&&t.current&&e.target instanceof Node&&!t.current.contains(e.target)&&o()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[t]),{onClick:o}}({$content:p,openType:n,setDisplayState:d}).onClick,E=(0,v.usePrevious)(t);(0,c.useEffect)((function(){E!==t&&(t||"closed"===u?t&&"opened"!==u&&d("opening"):d(p.current?"closing":"closed"))}),[t,E,u,p]);var _=(0,c.useCallback)((function(){d("opened")}),[]),C=(0,c.useCallback)((function(){d("closed")}),[]),k=(0,c.useCallback)((function(e,t){w(),b(e,t)}),[b,w]);return{displayState:u,$content:p,$trigger:h,onClick:w,onHover:y,handleHide:k,handleOpened:_,handleClosed:C}}({open:A,openType:(0,p.useDeviceData)().isTouchOnly&&"hover"===u?"click":u,delay:g,hideDelay:y,childOpen:j}),F=V.displayState,G=V.$content,U=V.$trigger,z=V.onClick,K=V.onHover,W=V.handleHide,Z=V.handleOpened,$=V.handleClosed,q=(0,c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),k&&W(0,!1)}),[k,W]);return(0,c.useEffect)((function(){"opened"===F&&(null==x||x()),"closed"===F&&(null==P||P())}),[F,P,x]),(0,c.useEffect)((function(){var e=!j&&I;(N||!["closing","opening"].includes(F)&&!e)&&H(_)}),[j,_,F,I,N,k]),c.createElement("div",{className:d()("DropdownReforged",E.wrapper,(t={},(0,o.default)(t,E.wrapperOpened||"DropdownReforged--opened","opened"===F),(0,o.default)(t,E.wrapperClosed||"DropdownReforged--closed","closed"===F),t))},c.createElement(m.Provider,{value:{setChildOpen:D}},c.createElement(s.Popper,(0,r.default)({ref:U},M,{portalClassName:E.portal,onMouseEnter:K,open:"closed"!==F,content:c.createElement(l.default,{nodeRef:G,in:"opening"===F||"opened"===F,addEndListener:function(e){var t;return null===(t=G.current)||void 0===t?void 0:t.addEventListener("transitionend",e,!1)},mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"DropdownReforged__contentWrapper-",onEntered:Z,onExited:$},c.createElement("div",{ref:G,className:d()("DropdownReforged__contentWrapper",E.contentWrapper),onClick:q},B))}),c.createElement("div",{className:d()("DropdownReforged__trigger",E.trigger),onMouseOver:K,onMouseEnter:K,onClick:z},C))))}},56151:(e,t,n)=>{"use strict";n.d(t,{LayerProvider:()=>a,useLayer:()=>i});var r=n(67294),o=(n(73935),(0,r.createContext)({})),a=function(e){var t=e.layer,n=e.children;return r.createElement(o.Provider,{value:{layer:t}},n)},i=function(){return(0,r.useContext)(o).layer||void 0}},40637:(e,t,n)=>{"use strict";n.d(t,{Link:()=>s});var r=n(14957),o=n(16790),a=n(67294),i=n(84970),c=n(21705),l=["children","href","payload","download","target","rel","onNavigate","stopPropagation"],s=(0,a.forwardRef)((function(e,t){var n=e.children,s=e.href,f=e.payload,v=e.download,p=e.target,h=e.rel,m=e.onNavigate,g=e.stopPropagation,b=void 0===g||g,y=(0,o.default)(e,l),w=(0,i.useBrowserEnv)(),E=w.navigate,_=function(e,t){var n=e.replace(".","\\."),r=(0,c.safeDecodeURI)(t);if(/^\/[^/]/.test(r)||new RegExp("^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?(".concat(n,"|vk\\.me|vk\\.cc)(\\/.*)?")).test(r)){var o=!/^(https?:\/\/)?([a-z0-9_\-.]+\.)?(vk\.me|vk\.cc)(\/.*)?/.test(r),a=o?"_self":"_blank";return{url:t,shouldNavigate:o,target:a,rel:"_blank"===a?"noopener noreferrer":void 0}}return{url:d(t)?t:u(t,e),shouldNavigate:!1,target:"_blank",rel:"noopener noreferrer"}}(w.vkDomain,s);return a.createElement("a",(0,r.default)({},y,{href:_.url,target:p||_.target,rel:h||_.rel,ref:t,onClick:function(e){if(b&&e.stopPropagation(),!v)if(y.onClick)y.onClick(e);else{if(!_.shouldNavigate)return;E.openLink(s,f||null,e),null==m||m()}}}),n)}));function u(e,t){return"https://".concat(t,"/away.php?to=").concat(encodeURIComponent((0,c.safeDecodeURI)(e)),"&utf=1")}function d(e){return/^mailto:/.test(e)}},7731:(e,t,n)=>{"use strict";n.d(t,{ModalContext:()=>i,ModalsProvider:()=>c});var r=n(80312),o=n(56568),a=n(67294),i=(0,a.createContext)({}),c=function(e){var t=e.children,n=e.modals,c=e.modalsStack,l=(0,a.useCallback)((function(e){var t=c.currentElement,n=0;if((null==t?void 0:t.groupId)!==e)throw Error("Пытаетесь закрыть группу модалок, которая закрыта");for(;(null===(r=c.currentElement)||void 0===r?void 0:r.groupId)===e;){var r;n+=1,c.goBack()}c.pop(n)}),[c]),s=(0,a.useCallback)((function(e){var t=n.getModalParams(e),r=t.groupId,o=t.isSubModal;c.push({modalId:e,groupId:r,isSubModal:o})}),[c,n]),u=(0,a.useCallback)((function(e){var t=c.currentElement;if((null==t?void 0:t.modalId)!==e)throw Error("Пытаетесь закрыть модалку, которая закрыта");c.pop()}),[c]),d=(0,a.useState)([]),f=(0,o.default)(d,2),v=f[0],p=f[1];return(0,a.useLayoutEffect)((function(){return c.subscribe((function(e){var t=e.action,n=e.payload;"add"===t&&(e.payload.isSubModal?p([].concat((0,r.default)(v),[n.modalId])):p([n.modalId])),"remove"===t&&p(v.filter((function(e){return!n.find((function(t){return e===t.modalId}))})))}))}),[c,v]),a.createElement(i.Provider,{value:{openedModals:v,openModal:s,closeModal:u,closeGroup:l,getModalGroup:n.getModalGroup,createModal:n.createModal,createGroup:n.createGroup}},t)}},71851:(e,t,n)=>{"use strict";n.d(t,{OptimizedSpinner:()=>d});var r=n(22559),o=n(67294),a=n(20700),i=n.n(a),c=n(44801),l=n(54632);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.className,n=e.size,r=void 0===n?"small":n,a=e.intersectionOptions,s=e.onIntersection,d=(0,l.useInView)(u(u({},a),{},{threshold:.01})),f=d.ref,v=d.inView;return(0,o.useEffect)((function(){v&&s&&s()}),[v]),o.createElement("div",{ref:f,className:i()("OptimizedSpinner",t)},v&&o.createElement(c.Spinner,{size:r}))}},88751:(e,t,n)=>{"use strict";n.d(t,{ConvoAudiosPlaylistContext:()=>a,ConvoAudiosPlaylistProvider:()=>i});var r=n(67294),o=n(19423),a=r.createContext((function(){})),i=function(e){var t=e.convo,n=e.children,i=(0,r.useRef)(t);i.current=t;var c=(0,r.useCallback)((function(){return new o.ConvoAudiosPlaylist(i.current)}),[]);return r.createElement(a.Provider,{value:c},n)}},27415:(e,t,n)=>{"use strict";n.d(t,{Popper:()=>g});var r=n(14957),o=n(22559),a=n(56568),i=n(16790),c=n(67294),l=n(20700),s=n.n(l),u=n(26954),d=n(84970),f=n(87075),v=n(56151),p=["open","position","mode","align","adaptation","content","portalClassName","children","portalTarget"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=c.forwardRef((function(e,t){var n,o=e.open,l=void 0===o||o,h=e.position,g=void 0===h?"auto":h,b=e.mode,y=void 0===b?"side":b,w=e.align,E=void 0===w?"auto":w,_=e.adaptation,C=e.content,k=e.portalClassName,O=e.children,A=e.portalTarget,x=(0,i.default)(e,p),P=(0,v.useLayer)(),N=(0,c.useState)(null),M=(0,a.default)(N,2),L=M[0],S=M[1],j=(0,d.useCombinedRefs)(t),D=(0,c.useState)(null),I=(0,a.default)(D,2),R=I[0],T=I[1],B=(0,c.useState)(null),H=(0,a.default)(B,2),V=H[0],F=H[1],G=(0,c.useState)(null),U=(0,a.default)(G,2),z=U[0],K=U[1],W=m(m({},O.props),{},{ref:j}),Z=(0,c.useCallback)((function(e){e&&S(e)}),[]);return(0,c.useLayoutEffect)((function(){if(j.current){var e=function(e,t,n,r,o,a,i,c){if(!a)return[null,null,null];var l="auto",s=["top","bottom"],u=["left","right"],d="fixed";if(!e)return[{top:0,left:0,width:0,height:0,position:d},o===l?"left":o,r===l?"bottom":r];var v=e.getBoundingClientRect(),p=window,h=p.innerWidth,g=p.innerHeight,b=window.scrollY||document.documentElement.scrollTop,y=window.scrollX||document.documentElement.scrollLeft;c&&(v=(0,f.getOffsetRect)(e,c),h=c.clientWidth,g=c.clientHeight,b=c.scrollTop,y=c.scrollLeft,d="absolute");var w=null==t?void 0:t.getBoundingClientRect(),E=(null==w?void 0:w.width)||0,_=(null==w?void 0:w.height)||0,C=E?Math.max(v.width,E):void 0,k=_?Math.max(v.height,_):void 0;if(r===l){var O=v.top-b;r=b+g-v.top-v.height>O?"bottom":"top"}if(o===l){var A=v.left+.5*v.width,x=y+2*h/3;o=A>=y+h/3&&A<=x?"center":A>x?"right":"left"}var P=v.left,N=v.top,M=P+v.width,L=N+v.height,S=.5*v.width,j=.5*E,D=.5*v.height,I=.5*_,R=v.width<E,T=v.height<_,B=N<_,H=L+_>g+b,V=c&&N-b<_,F=L<_,G=N+D<I,U=N+_>g+b,z=N+D+I>g+b,K=M<E,W=M+E>h+y,Z=P+S<j,$=P+S+j>h+y,q="horizontal"===i,X="vertical"===i;_&&E&&(X||(("top"===r&&B||"center"===o&&G||u.includes(o)&&F)&&(r="bottom"),("bottom"===r&&H||"center"===o&&z||u.includes(o)&&U)&&(r="top")),q||(s.includes(r)&&(u.includes(o)&&(K&&(o="left"),W&&(o="right")),"center"===o&&($&&(o="right"),Z&&(o="left"))),u.includes(r)&&(K&&(r="right",o="center"===o?o:"left"),W&&(r="left",o="center"===o?o:"right"))));if("side"===n){var Y={};switch(r){case"top":Y={width:C,top:N-_};break;case"bottom":Y={width:C,top:L};break;case"left":Y={height:k,left:P-E};break;case"right":Y={height:k,left:M}}return s.includes(r)&&R&&("right"===o&&(Y.left=M-E),"center"===o&&(Y.left=P+S-j),q&&(("center"===o&&Z||"right"===o&&K)&&(Y.left=0),("center"===o&&$||"left"===o&&W)&&(Y.left=h-E+y))),u.includes(r)&&T&&("center"===o&&(Y.top=N+D-I),X&&(("center"===o&&G||u.includes(o)&&F)&&(Y.top=0),V&&"center"===o&&(Y.top=b),("center"===o&&z||u.includes(o)&&U)&&(Y.top=g-_+b))),[m(m({top:N,left:P},Y),{},{position:d}),o,r]}switch(r){case"top":P+=.5*v.width;break;case"right":P+=v.width,N+=.5*v.height;break;case"bottom":P+=.5*v.width,N+=v.height;break;case"left":N+=.5*v.height}return[{top:N,left:P,width:E,height:_,position:d},o,r]}(j.current,L,y,g,E,l,_,null!=A&&A.current?A.current:void 0),t=(0,a.default)(e,3),n=t[0],r=t[1],o=t[2];T(n),F(r),K(o)}}),[C,y,g,E,j,l,L,A,_]),c.createElement(c.Fragment,null,c.cloneElement(O,W),l&&c.createElement(u.Portal,(0,r.default)({},x,{ref:Z,className:s()("MEPopper","MEConfig",V&&"MEPopper--align".concat((n=V,n.length>0?n.slice(0,1).toUpperCase()+n.slice(1):"")),z&&"MEPopper--".concat(z)),"data-align":V,"data-position":z,portalClassName:k,style:R||void 0,portalTarget:(null==A?void 0:A.current)||P}),C))}))},26954:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>d});var r=n(14957),o=n(80312),a=n(56568),i=n(16790),c=n(67294),l=n(73935),s=n(84970),u=["children","portalClassName","portalTarget"],d=(0,c.forwardRef)((function(e,t){var n=e.children,d=e.portalClassName,f=e.portalTarget,v=(0,i.default)(e,u),p=(0,c.useState)(null),h=(0,a.default)(p,2),m=h[0],g=h[1],b=(0,s.usePrevious)(d);return(0,c.useEffect)((function(){if(m){var e,t;if(b)(e=m.classList).remove.apply(e,(0,o.default)(b.split(" ")));if(d)(t=m.classList).add.apply(t,(0,o.default)(d.split(" ")))}}),[m,d,b]),(0,c.useLayoutEffect)((function(){if(null!==f){var e=function(e,t){var n,r=document.createElement("div");e&&(n=r.classList).add.apply(n,(0,o.default)(e.split(" ")));return(t||document.body).appendChild(r)}(d,f);return g(e),function(){e.remove()}}}),[f]),m?l.createPortal(c.createElement("div",(0,r.default)({},v,{ref:t}),n),m):null}))},35544:(e,t,n)=>{"use strict";n.d(t,{Provider:()=>v});var r=n(22559),o=n(67294),a=n(14432),i=n(84970),c=n(7731),l=n(48521),s=n(24576),u=n(77673);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.children,n=e.env,r=e.featureFlags,d=e.state,v=e.dispatch,p=e.owner,h=e.appSource,m=(0,o.useCallback)((function(e){v(f({type:"CacheUpdateReceived"},e))}),[v]),g=(0,o.useMemo)((function(){return f({viewer:a.safeGet(d.peers,d.viewer.id)},d.viewer)}),[d.peers,d.viewer]);return o.createElement(i.BrowserEnvProvider,{value:n},o.createElement(l.KeyBoardHandlersProvider,null,o.createElement(s.RouterProvider,null,o.createElement(c.ModalsProvider,{modals:n.modals.system,modalsStack:n.modals.stack},o.createElement(i.DispatchProvider,{value:v},o.createElement(i.FeatureFlagsProvider,{value:r},o.createElement(i.HelpHintsProvider,{value:d.helpHints},o.createElement(i.OnlinesProvider,{value:d.onlines},o.createElement(i.TypingsProvider,{value:d.typings},o.createElement(i.PeersProvider,{value:d.peers},o.createElement(i.OwnerProvider,{value:p},o.createElement(i.ConvosProvider,{value:d.convos},o.createElement(i.ConvosSearchIndexProvider,{value:d.convosSearchIndex},o.createElement(i.ViewerProvider,{value:g},o.createElement(i.InsertIntoCacheProvider,{value:m},o.createElement(u.ComposerDraftsContext.Provider,{value:d.composerDrafts},o.createElement(i.AppSourceProvider,{value:h},o.createElement(i.VideomessageShapesProvider,{value:d.videomessageShapes},t))))))))))))))))))}},24576:(e,t,n)=>{"use strict";n.d(t,{RouterProvider:()=>c,useRouter:()=>l,useConvoRoute:()=>s});var r=n(56568),o=n(84970),a=n(67294),i=(0,a.createContext)({}),c=function(e){var t=e.children,n=(0,o.useBrowserEnv)().router,c=(0,a.useState)(n.currentRoute),l=(0,r.default)(c,2),s=l[0],u=l[1];return(0,a.useLayoutEffect)((function(){var e=n.subscribe((function(e){u(e)}));return function(){return e()}}),[n]),a.createElement(i.Provider,{value:{router:n,route:s}},t)},l=function(){var e=(0,a.useContext)(i),t=e.route,n=e.router;return{route:t,navigate:n.push,back:n.back,forward:n.forward,replace:n.replace}},s=function(){var e=l().route;if("ConvoRoute"!==e.kind)throw Error("Используйте хук только внутри роута Convo");return e}},83704:(e,t,n)=>{"use strict";n.d(t,{Tooltip:()=>v});var r=n(14957),o=n(56568),a=n(16790),i=n(67294),c=n(20700),l=n.n(c),s=n(27415),u=n(84970),d=n(36698),f=["children","content","position","align","open","onOpen","onClose","delay","backgroundColor","pointerEvents","showOnTouch"],v=function(e){var t=e.children,n=e.content,c=e.position,v=void 0===c?"auto":c,p=e.align,h=void 0===p?"auto":p,m=e.open,g=void 0!==m&&m,b=e.onOpen,y=e.onClose,w=e.delay,E=void 0===w?50:w,_=e.backgroundColor,C=e.pointerEvents,k=void 0===C?"none":C,O=e.showOnTouch,A=void 0!==O&&O,x=(0,a.default)(e,f),P=(0,u.useFeatureFlags)(),N=(0,d.useDeviceData)(),M=(0,i.useState)(g?"opened":"closed"),L=(0,o.default)(M,2),S=L[0],j=L[1],D=_||"rgba(0, 0, 0, 0.72)",I=(0,i.useRef)(null),R=(0,i.useRef)(null),T=(0,i.useRef)(null),B=function(){R.current&&clearTimeout(R.current),T.current&&clearTimeout(T.current),R.current=T.current=null},H=(0,i.useCallback)((function(){j("closed"),y&&y()}),[y]),V=(0,i.useCallback)((function(){"opened"===S?(j("is_closing"),T.current=window.setTimeout(H,200)):H()}),[S,H]),F=(0,i.useCallback)((function(){B(),R.current=window.setTimeout((function(){j("opened"),b&&b()}),E)}),[E,b]),G=(0,i.useCallback)((function(){B(),R.current=window.setTimeout(V,0)}),[V]);(0,i.useEffect)((function(){var e=I.current;return e&&(e.addEventListener("mouseenter",F),e.addEventListener("mouseleave",G)),function(){e&&(e.removeEventListener("mouseenter",F),e.removeEventListener("mouseleave",G))}}),[F,G]),(0,i.useEffect)((function(){return B}),[]),(0,i.useEffect)((function(){g?F():G()}),[g]);var U=i.createElement("div",{className:l()("METooltip",{"METooltip--removed":"is_closing"===S}),style:{"--tooltip_dark_background":D,pointerEvents:k}},n);return P.me_fc_tooltips?!A&&N.isTouchOnly?t:i.createElement(s.Popper,(0,r.default)({content:U,position:v,align:h,open:"closed"!==S,ref:I,portalClassName:"MEConfig"},x),t):t}},25834:(e,t,n)=>{"use strict";n.d(t,{computeAttachePhotosLayout:()=>h});var r=n(80312),o=n(22559);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){var n=e/t.reduce((function(e,t){return e+t.width}),0),r=t.map((function(e){var t=e.height,r=e.width;return l(l({},e),{},{height:t*n,width:r*n})}));return r}function u(e,t){var n=t.height,r=t.width,o=e/n;return l(l({},t),{},{height:e,width:r*o})}function d(e){var t,n=0,r=0,o=a(e[0]);try{for(o.s();!(t=o.n()).done;){r+=t.value.width}}catch(e){o.e(e)}finally{o.f()}var i,c=a(e);try{for(c.s();!(i=c.n()).done;){var l=i.value;l[0]&&(n+=l[0].height)}}catch(e){c.e(e)}finally{c.f()}return r/n}function f(e,t){var n=t[0],o=[].concat((0,r.default)(t),[e]).sort((function(e,t){return e-t})),a=o.findIndex((function(t){return t===e})),i=o[a-1],c=o[a+1];if(!i&&c)n=c;else if(!c&&i)n=i;else if(c&&i){if(e>=1&&i<.75)return c;n=c/e>e/i?i:c}return n}function v(e,t){return e.map((function(e){var n=f(e.width/e.height,t);return e.width>e.height?l(l({},e),{},{width:n*e.height}):l(l({},e),{},{height:e.width/n})}))}function p(e,t,n){var r=t.minHeight;return n.reduce((function(t,n,o,a){var i=t[t.length-1],c=u(r,n),l=c.width,s=i?i.reduce((function(e,t){return e+t.width}),0):0;return(l+s<=e||o===a.length-1)&&i?i.push(c):t.push([c]),t}),[]).map((function(t){return s(e,t)})).map((function(t){if(1===t.length&&t[0]){var n=t[0],r=n.width>n.height;return[l(l({},n),{},{width:e,height:r?n.height>e/2?e/2:n.height:e})]}return t}))}function h(e,t,n,r){var o=n.maxSingleHeight,i=[],c={},l=[9/16,3/4,1,4/3,16/9],h=function(e,t){for(var n=function(e,t,n){var r=[t],o=e;do{(o=r[r.length-1]-t*n)<e&&(o=e),r.push(o)}while(o!==e);return r}(t.minHeight,e,.05),r=[],o=0;o<n.length;o++){var a=n[o];a&&r.push({minHeight:a})}return r}(t,n),m=v(r,l),g=r[0];if(1===r.length&&g)return function(e,t,n,r){if(v([n],t)[0]){if(n.width>=n.height)return[s(e,[n])];var o=r||16/9*e,a=s(e,[n])[0];return a&&a.height<o?[[a]]:[[u(o,n)]]}return[[n]]}(t,l,g,o);var b,y,w=a(h);try{for(w.s();!(b=w.n()).done;){var E=p(t,b.value,m),_=d(E);i.push(_),c[_]=E}}catch(e){w.e(e)}finally{w.f()}if(i.length){var C=f(e,i);y=C&&c[C]}return y||p(t,n,r)}},12869:(e,t,n)=>{"use strict";n.d(t,{isModuleKeyCombo:()=>u,isGlobalKeyCombo:()=>f,getKeyCombo:()=>v});var r,o,a,i,c=n(22559),l=n(87075);!function(e){e.Mod="Mod",e.Alt="Alt",e.Shift="Shift",e.Meta="Meta"}(o||(o={})),function(e){e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.Escape="Escape",e.Enter="Enter",e.Backspace="Backspace",e.Tab="Tab",e.Slash="/",e.PageDown="PageDown",e.PageUp="PageUp",e.Home="Home",e.End="End"}(a||(a={})),function(e){e.F="F"}(i||(i={}));var s=[o.Shift,a.ArrowDown,a.ArrowUp,a.Enter,a.Escape,a.Backspace,"".concat(o.Shift,"+").concat(a.Enter),"".concat(o.Mod,"+").concat(a.Enter),a.ArrowLeft,a.ArrowRight,a.Tab],u=function(e){return s.includes(e)},d=["".concat(o.Mod,"+").concat(i.F),"".concat(o.Mod,"+").concat(o.Shift,"+").concat(i.F),"".concat(o.Mod,"+").concat(a.Slash)],f=function(e){return d.includes(e)},v=function(e){var t=[];return Object.values(o).forEach((function(n){p[n](e)&&t.push(n)})),Object.values(a).forEach((function(n){return e.key===n&&t.push(n)})),Object.values(i).forEach((function(n){e.key.toUpperCase()!==n?e.code.slice(3)===n&&t.push(n):t.push(n)})),t.join("+")},p=(r={},(0,c.default)(r,o.Mod,(function(e){return l.isMac?e.metaKey:e.ctrlKey})),(0,c.default)(r,o.Alt,(function(e){return e.altKey})),(0,c.default)(r,o.Shift,(function(e){return e.shiftKey})),(0,c.default)(r,o.Meta,(function(e){return l.isMac?e.ctrlKey:e.metaKey})),r)},87075:(e,t,n)=>{"use strict";n.d(t,{getOffsetRect:()=>c,browser:()=>s,isMac:()=>u,getAttachForwardIndent:()=>d,getExpectedAttachWidth:()=>f,getFirstLetter:()=>v,enRuKeysMap:()=>p,getOrganiserUid:()=>h,getSafeCount:()=>m});var r=n(22559),o=n(70608),a=n.n(o),i=n(21705);function c(e,t){if("undefined"==typeof window||!(e instanceof HTMLElement))return{top:0,left:0,width:0,height:0};var n=e.getBoundingClientRect(),r=null==t?void 0:t.getBoundingClientRect(),o=document.body,a=document.documentElement,i=t?t.scrollTop:window.pageYOffset||a.scrollTop||o.scrollTop,c=(t?t.scrollLeft:window.pageXOffset)||a.scrollLeft||o.scrollLeft,l=a.clientTop||o.clientTop||0,s=a.clientLeft||o.clientLeft||0;return{top:n.top-((null==r?void 0:r.top)||0)+i-l,left:n.left-((null==r?void 0:r.left)||0)+c-s,width:n.width,height:n.height}}var l=navigator.userAgent.toLowerCase(),s={version:(l.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[/: ]([\d.]+)/)||[0,"0"])[1],safari:!/chrome/i.test(l)&&/webkit|safari|khtml/i.test(l),safari_mobile:/iphone|ipod|ipad/i.test(l),ios:/.+(ipod|ipad|iphone.*os)/i.test(l),touch:window.matchMedia("(pointer: coarse)").matches,voiceRecordingSupported:Boolean(window.navigator.mediaDevices&&"getUserMedia"in window.navigator.mediaDevices&&(window.AudioContext||window.webkitAudioContext))},u=navigator.userAgent.includes("Macintosh;"),d=function(e){return e>0?22+10*(e-1):0};function f(e,t,n,r){var o=r+(t?0:8)-d(n);return[o,o*(e?"undefined"!=typeof window?window.devicePixelRatio:2:1)]}var v=function(e){var t=a()().exec(e);return t&&0===t.index&&t[0]?t[0]:(Array.from(e)[0]||"").toUpperCase()},p=(0,r.default)({q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":"."},u?"\\":"`","ё");function h(e){switch(e.kind){case"filters":return e.filter;case"folders":return e.id;default:(0,i.exhaustivenessCheck)(e)}}var m=function(e){return Math.min(1e3,e)}},89018:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_DRAFT:()=>i,isEmpty:()=>c,getNormalForward:()=>l,deleteDraftsWithKind:()=>s});var r=n(56568),o=n(80312),a=n(14432),i={text:"",attaches:{}};function c(e,t){var n=0!==Object.keys(e.attaches).length;return 0===t.length&&!e.forward&&!n}function l(e,t){if(e.forward&&e.forward.kind===t){var n=(0,o.default)(e.forward.items).filter((function(e){return"Normal"===e.kind}));return n[0]?[n[0]].concat((0,o.default)(n.slice(1))):void 0}}function s(e){return Object.entries(e).reduce((function(e,t){var n=(0,r.default)(t,2),o=n[0],i=n[1];return"kind"in i||(e[a.resolveId(+o)]=i),e}),{})}},14957:(e,t,n)=>{"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{default:()=>r})},20700:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var c in n)r.call(n,c)&&n[c]&&e.push(c);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},8994:(e,t,n)=>{"use strict";n.d(t,{nanoid:()=>r});let r=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},67075:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(t);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}var i=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,n){return!Object.is(e,t[n])}))},c={error:null},l=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state=c,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}a(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(c)},n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},n.componentDidUpdate=function(e,t){var n,r,o=this.state.error,a=this.props.resetKeys;null!==o&&null!==t.error&&i(e.resetKeys,a)&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,a),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,o=t.FallbackComponent,a=t.fallback;if(null!==e){var i={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(a))return a;if("function"==typeof n)return n(i);if(o)return r.createElement(o,i);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.Component);function s(e,t){var n=function(n){return r.createElement(l,t,r.createElement(e,n))},o=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+o+")",n}function u(e){var t=r.useState(null),n=t[0],o=t[1];if(null!=e)throw e;if(null!=n)throw n;return o}e.ErrorBoundary=l,e.useErrorHandler=u,e.withErrorBoundary=s,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(67294))}}]);try{stManager.done("dist/11c7a0efa74f6d488cf4ce0ffbe4d05a.92f4198e7c280f4f9e80.js")}catch(e){}